(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["userGroup"],{"2e46":function(e,t,a){},"45f6":function(e,t,a){"use strict";var r=a("4daf"),n=a.n(r);n.a},"4d63":function(e,t,a){var r=a("83ab"),n=a("da84"),o=a("94ca"),i=a("7156"),s=a("9bf2").f,c=a("241c").f,u=a("44e7"),l=a("ad6d"),d=a("9f7f"),f=a("6eeb"),p=a("d039"),m=a("69f3").set,g=a("2626"),h=a("b622"),v=h("match"),b=n.RegExp,y=b.prototype,k=/a/g,w=/a/g,C=new b(k)!==k,O=d.UNSUPPORTED_Y,j=r&&o("RegExp",!C||O||p((function(){return w[v]=!1,b(k)!=k||b(w)==w||"/a/i"!=b(k,"i")})));if(j){var S=function(e,t){var a,r=this instanceof S,n=u(e),o=void 0===t;if(!r&&n&&e.constructor===S&&o)return e;C?n&&!o&&(e=e.source):e instanceof S&&(o&&(t=l.call(e)),e=e.source),O&&(a=!!t&&t.indexOf("y")>-1,a&&(t=t.replace(/y/g,"")));var s=i(C?new b(e,t):b(e,t),r?this:y,S);return O&&a&&m(s,{sticky:a}),s},$=function(e){e in S||s(S,e,{configurable:!0,get:function(){return b[e]},set:function(t){b[e]=t}})},x=c(b),R=0;while(x.length>R)$(x[R++]);y.constructor=S,S.prototype=y,f(n,"RegExp",S)}g("RegExp")},"4daf":function(e,t,a){},"5b00":function(e,t,a){"use strict";var r=a("2e46"),n=a.n(r);n.a},7156:function(e,t,a){var r=a("861d"),n=a("d2bb");e.exports=function(e,t,a){var o,i;return n&&"function"==typeof(o=t.constructor)&&o!==a&&r(i=o.prototype)&&i!==a.prototype&&n(e,i),e}},a434:function(e,t,a){"use strict";var r=a("23e7"),n=a("23cb"),o=a("a691"),i=a("50c4"),s=a("7b0b"),c=a("65f0"),u=a("8418"),l=a("1dde"),d=a("ae40"),f=l("splice"),p=d("splice",{ACCESSORS:!0,0:0,1:2}),m=Math.max,g=Math.min,h=9007199254740991,v="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!f||!p},{splice:function(e,t){var a,r,l,d,f,p,b=s(this),y=i(b.length),k=n(e,y),w=arguments.length;if(0===w?a=r=0:1===w?(a=0,r=y-k):(a=w-2,r=g(m(o(t),0),y-k)),y+a-r>h)throw TypeError(v);for(l=c(b,r),d=0;d<r;d++)f=k+d,f in b&&u(l,d,b[f]);if(l.length=r,a<r){for(d=k;d<y-r;d++)f=d+r,p=d+a,f in b?b[p]=b[f]:delete b[p];for(d=y;d>y-r+a;d--)delete b[d-1]}else if(a>r)for(d=y-r;d>k;d--)f=d+r-1,p=d+a-1,f in b?b[p]=b[f]:delete b[p];for(d=0;d<a;d++)b[d+k]=arguments[d+2];return b.length=y-r+a,l}})},ad4e:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"userGroup"},[a("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.handleAdd}},[e._v("添加用户组")]),e.selectedRowKeys.length>0?a("a-alert",{staticClass:"userGroupAlert",attrs:{type:"info",showIcon:""}},[a("div",{attrs:{slot:"message"},slot:"message"},[e._v(" 已选择 "),a("font",[e._v(e._s(e.selectedRowKeys.length))]),e._v(" 项 "),a("a",{staticClass:"deleteLink",attrs:{href:"javascript:void(0);"},on:{click:e.handleDelAll}},[e._v("批量删除")])],1)]):e._e(),a("a-table",{staticClass:"userGroupList",attrs:{rowSelection:e.rowSelection,rowKey:e.rowKey,columns:e.columns,dataSource:e.userGroupData,pagination:e.paginationConf,loading:!e.ready},on:{change:e.handlePageChange},scopedSlots:e._u([{key:"action",fn:function(t){return a("div",{staticClass:"userGroupActionContainer"},[a("a",{attrs:{href:"javascript:void(0);"},on:{click:function(a){return e.handleEdit(t)}}},[e._v("编辑")]),a("a",{attrs:{href:"javascript:void(0);"},on:{click:function(a){return e.handleDel(t)}}},[e._v("删除")])])}},{key:"num",fn:function(t){return[e._v(e._s("number"===typeof t.num&&t.num>0?t.num:0))]}}])})],1)},n=[],o=(a("99af"),a("c740"),a("d81d"),a("a434"),a("b0c0"),a("d3b7"),a("ac1f"),a("25f0"),a("1276"),a("cd17"),a("ed3b")),i=a("d4ec"),s=a("bee2"),c=a("99de"),u=a("7e84"),l=a("262e"),d=a("9ab4"),f=a("60a3"),p=a("d41e"),m=function(e){function t(){var e;return Object(i["a"])(this,t),e=Object(c["a"])(this,Object(u["a"])(t).apply(this,arguments)),e.ready=!0,e.pageSize=20,e.paginationConf={showSizeChanger:!0,total:0,showTotal:function(e){return"共 ".concat(e," 条记录")},defaultPageSize:e.pageSize,pageSizeOptions:["10","20"],current:1},e.columns=[{title:"用户组",dataIndex:"name",width:200},{title:"用户数",scopedSlots:{customRender:"num"},width:240},{title:"修改时间",dataIndex:"updatedAt",width:247},{title:"操作",align:"center",scopedSlots:{customRender:"action"},width:244}],e.userGroupData=[],e.selectedRowKeys=[],e}return Object(l["a"])(t,e),Object(s["a"])(t,[{key:"rowKey",value:function(e){return"".concat(e.id,"&").concat(e.name)}},{key:"handleSelectKeyChange",value:function(e){this.selectedRowKeys=e}},{key:"handlePageChange",value:function(e){this.paginationConf.current=e.current,this.pageSize!==e.pageSize&&(this.paginationConf.current=1,this.pageSize=e.pageSize),this.getUserGroupList(),document.body.scrollTop=document.documentElement.scrollTop=0}},{key:"mounted",value:function(){this.getUserGroupList()}},{key:"getUserGroupList",value:function(){var e=this;this.ready=!1,Object(p["d"])(this.paginationConf.current,this.pageSize).then((function(t){e.userGroupData=t.data.retval.groups,e.paginationConf.total=t.data.retval.total,t.data.retval.total<=e.pageSize&&(e.paginationConf.itemRender=function(e,t,a){return"prev"===t?"":"next"===t?"":a}),e.ready=!0}))}},{key:"getSelectUserGroupIds",value:function(){return this.selectedRowKeys.map((function(e){return parseInt(e.split("&")[0])}))}},{key:"getSelectUserGroupNames",value:function(){return this.selectedRowKeys.map((function(e){return e.split("&")[1]}))}},{key:"handleEdit",value:function(e){this.$router.push({path:"/setting/userGroupEdit",query:{groupId:e.id.toString()}})}},{key:"handleDel",value:function(e){var t=this,a=this.$createElement;o["a"].confirm({title:"删除确定",icon:"none",keyboard:!1,content:a("div",{},[a("p","确认要删除用户组《".concat(e.name,"》吗？删除以后无法恢复。"))]),okText:"确定",cancelText:"取消",onOk:function(){t.delUserGroups([e.id],"".concat(e.id,"&").concat(e.name))}})}},{key:"handleDelAll",value:function(){for(var e=this,t="",a=this.getSelectUserGroupNames(),r=0;r<3;r++){if("string"!==typeof a[r])break;0!==r&&(t+="、"),t+="《".concat(a[r],"》")}a.length>3&&(t+="…等".concat(a.length,"条记录"));var n=this.$createElement;o["a"].confirm({title:"批量删除确定",icon:"none",keyboard:!1,content:n("div",{},[n("p","确认要删除用户组".concat(t,"吗？删除以后无法恢复。"))]),okText:"确定",cancelText:"取消",onOk:function(){e.delUserGroups(e.getSelectUserGroupIds())}})}},{key:"delUserGroups",value:function(e,t){var a=this;Object(p["b"])(e).then((function(r){a.$message.success("删除成功"),e.length>1?a.paginationConf.current=1:1===e.length&&a.userGroupData.length<=1&&a.paginationConf.current--,a.getUserGroupList(),1===e.length?a.selectedRowKeys.splice(a.selectedRowKeys.findIndex((function(e){return e===t})),1):a.selectedRowKeys=[]})).catch((function(e){"100001"===e.data.errcode?a.$message.error(a.$messagevalue[100001]):a.$message.error(e.data.errmsg)}))}},{key:"handleAdd",value:function(){this.$router.push({name:"userGroupAdd"})}},{key:"rowSelection",get:function(){var e=this.selectedRowKeys;return{selectedRowKeys:e,onChange:this.handleSelectKeyChange,hideDefaultSelections:!0}}}]),t}(f["f"]);m=Object(d["a"])([f["a"]],m);var g=m,h=g,v=(a("45f6"),a("2877")),b=Object(v["a"])(h,r,n,!1,null,"03e7b542",null);t["default"]=b.exports},b83f:function(e,t,a){},bee2:function(e,t,a){"use strict";function r(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,t,a){return t&&r(e.prototype,t),a&&r(e,a),e}a.d(t,"a",(function(){return n}))},bf9f:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"userGroupEdit"},[a("div",{staticClass:"userGroupEditTitle font-20pt-title"},[e._v("编辑用户组")]),a("a-divider",{staticClass:"divider"}),a("div",{staticClass:"userGroupForm"},[a("a-form",{attrs:{form:e.form},on:{submit:e.handleFormSubmit}},[a("a-form-item",{attrs:{label:"组名",colon:"","label-col":{span:3},required:"",wrapperCol:{span:12},"has-feedback":""}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{initialValue:e.groupDetail.name,rules:[{required:!0,message:"请输入用户组名称"},{pattern:e.$data.reg,message:"只能输入中英文和数字"}]}],expression:"[\n        'name',\n        { initialValue: groupDetail.name , rules: [{ required: true, message: '请输入用户组名称' },{ pattern: $data.reg, message: '只能输入中英文和数字' }] },\n      ]"}],attrs:{placeholder:"请输入用户组名称"}})],1),a("a-form-item",{attrs:{label:"说明",colon:"","label-col":{span:3},wrapperCol:{span:12},"has-feedback":""}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["remark",{initialValue:e.groupDetail.remark,rules:[{pattern:e.$data.reg,message:"只能输入中英文和数字"}]}],expression:"[\n        'remark',\n        { initialValue: groupDetail.remark , rules: [{ pattern: $data.reg, message: '只能输入中英文和数字' }] },\n      ]"}],attrs:{placeholder:"选填"}})],1),a("a-form-item",{attrs:{"wrapper-col":{span:3,offset:3}}},[a("a-button",{staticClass:"userGroupEditBtn",attrs:{type:"primary"},on:{click:e.handleFormSubmit}},[e._v("提交")])],1)],1)],1)],1)},n=[],o=(a("b0c0"),a("4d63"),a("ac1f"),a("25f0"),a("d4ec")),i=a("bee2"),s=a("99de"),c=a("7e84"),u=a("262e"),l=a("9ab4"),d=a("60a3"),f=a("d41e"),p=a("fe69"),m=function(e){function t(){var e;return Object(o["a"])(this,t),e=Object(s["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.beforeRouteLeaveConfig={isEdit:!1,submit:!1},e.groupId=0,e.groupDetail={name:"",remark:""},e.reg=new RegExp(/^[\u4e00-\u9fa5a-zA-Z0-9]+$/),e.name="",e.record="",e}return Object(u["a"])(t,e),Object(i["a"])(t,[{key:"beforeCreate",value:function(){var e=this;this.form=this.$form.createForm(this,{onFieldsChange:function(){e.beforeRouteLeaveConfig.isEdit=!0}})}},{key:"mounted",value:function(){var e=this;this.groupId=parseInt(this.$route.query.groupId),Object(f["c"])(this.groupId).then((function(t){e.groupDetail=t.data.retval})).catch((function(t){e.$message.error(t.data.errmsg)}))}},{key:"handleFormSubmit",value:function(){var e=this;this.form.validateFields((function(t){if(null===t){var a=e.form.getFieldsValue();e.beforeRouteLeaveConfig.submit=!0,Object(f["e"])(e.groupId,a.name,a.remark).then((function(t){e.$message.success("修改成功"),e.$router.back()})).catch((function(t){"FA002"===t.data.errcode?e.$message.error(e.$messagevalue.FA002):e.$message.error(t.data.errmsg)}))}}))}}]),t}(d["f"]);m=Object(l["a"])([Object(d["a"])({beforeRouteLeave:function(e,t,a){var r=this;r.beforeRouteLeaveConfig.submit?a():r.beforeRouteLeaveConfig.isEdit?Object(p["a"])((function(){a()})):a()}})],m);var g=m,h=g,v=(a("5b00"),a("2877")),b=Object(v["a"])(h,r,n,!1,null,"6aa90060",null);t["default"]=b.exports},c740:function(e,t,a){"use strict";var r=a("23e7"),n=a("b727").findIndex,o=a("44d2"),i=a("ae40"),s="findIndex",c=!0,u=i(s);s in[]&&Array(1)[s]((function(){c=!1})),r({target:"Array",proto:!0,forced:c||!u},{findIndex:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),o(s)},d41e:function(e,t,a){"use strict";a.d(t,"d",(function(){return i})),a.d(t,"a",(function(){return s})),a.d(t,"e",(function(){return c})),a.d(t,"c",(function(){return u})),a.d(t,"b",(function(){return l}));a("99af");var r=a("ee50"),n=a("759a"),o=n["d"];function i(e,t){var a={url:"".concat(n["a"],"/group/list"),method:"POST",data:{current:e,size:t,systemName:o}};return Object(r["a"])(a)}function s(e,t){var a={url:"".concat(n["a"],"/group/save"),method:"POST",data:{name:e,systemName:o}};return"string"===typeof t&&(a.data.remark=t),Object(r["a"])(a)}function c(e,t,a){var i={url:"".concat(n["a"],"/group/update"),method:"POST",data:{groupId:e,name:t,systemName:o}};return"string"===typeof a&&(i.data.remark=a),Object(r["a"])(i)}function u(e){var t={url:"".concat(n["a"],"/group/detail/").concat(e),method:"GET"};return Object(r["a"])(t)}function l(e){var t={url:"".concat(n["a"],"/group/del"),method:"POST",data:{groupIds:e}};return Object(r["a"])(t)}},d81d:function(e,t,a){"use strict";var r=a("23e7"),n=a("b727").map,o=a("1dde"),i=a("ae40"),s=o("map"),c=i("map");r({target:"Array",proto:!0,forced:!s||!c},{map:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}})},e3d0:function(e,t,a){"use strict";var r=a("b83f"),n=a.n(r);n.a},ee27:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"userGroupAdd"},[a("div",{staticClass:"userGroupAddTitle font-20pt-title"},[e._v("新建用户组")]),a("a-divider",{staticClass:"divider"}),a("div",{staticClass:"userGroupForm"},[a("a-form",{attrs:{form:e.form}},[a("a-form-item",{attrs:{label:"组名",colon:"","label-col":{span:3},required:"",wrapperCol:{span:12},"has-feedback":""}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"请输入用户组名称"},{pattern:e.$data.reg,message:"只能输入中英文和数字"}]}],expression:"[\n        'name',\n        { rules: [{ required: true, message: '请输入用户组名称' },{ pattern: $data.reg, message: '只能输入中英文和数字' }] },\n      ]"}],attrs:{placeholder:"请输入用户组名称"}})],1),a("a-form-item",{attrs:{label:"说明",colon:"","label-col":{span:3},wrapperCol:{span:12},"has-feedback":""}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["remark",{rules:[{pattern:e.$data.reg,message:"只能输入中英文和数字"}]}],expression:"[\n        'remark',\n        { rules: [{ pattern: $data.reg, message: '只能输入中英文和数字' }] },\n      ]"}],attrs:{placeholder:"选填"}})],1),a("a-form-item",{attrs:{"wrapper-col":{span:3,offset:3}}},[a("a-button",{staticClass:"userGroupAddBtn",attrs:{type:"primary"},on:{click:e.handleFormSubmit}},[e._v("提交")])],1)],1)],1)],1)},n=[],o=(a("b0c0"),a("4d63"),a("ac1f"),a("25f0"),a("d4ec")),i=a("bee2"),s=a("99de"),c=a("7e84"),u=a("262e"),l=a("9ab4"),d=a("60a3"),f=a("d41e"),p=a("fe69"),m=function(e){function t(){var e;return Object(o["a"])(this,t),e=Object(s["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.beforeRouteLeaveConfig={isEdit:!1,submit:!1},e.reg=new RegExp(/^[\u4e00-\u9fa5a-zA-Z0-9]+$/),e.name="",e.record="",e}return Object(u["a"])(t,e),Object(i["a"])(t,[{key:"beforeCreate",value:function(){this.form=this.$form.createForm(this)}},{key:"handleFormSubmit",value:function(){var e=this;this.form.validateFields((function(t){if(null===t){var a=e.form.getFieldsValue();e.beforeRouteLeaveConfig.submit=!0,Object(f["a"])(a.name,a.remark).then((function(t){e.$message.success("添加成功"),e.$router.back()})).catch((function(t){"FA001"===t.data.errcode?e.$message.error(e.$messagevalue.FA001):e.$message.error(t.data.errmsg)}))}}))}}]),t}(d["f"]);m=Object(l["a"])([Object(d["a"])({beforeRouteLeave:function(e,t,a){var r=this;r.beforeRouteLeaveConfig.submit?a():"string"===typeof r.form.getFieldsValue().name&&""!==r.form.getFieldsValue().name||"string"===typeof r.form.getFieldsValue().remark&&""!==r.form.getFieldsValue().remark?Object(p["a"])((function(){a()})):a()}})],m);var g=m,h=g,v=(a("e3d0"),a("2877")),b=Object(v["a"])(h,r,n,!1,null,"539d3020",null);t["default"]=b.exports},fe69:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));a("cd17");var r=a("ed3b"),n="系统发现您还有内容没保存，确定要退出当前页面吗？";function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n;r["a"].confirm({title:"提示",icon:function(e){return e("a-icon",{props:{type:"exclamation-circle",theme:"filled"}})},keyboard:!1,content:t,okText:"确定",cancelText:"取消",onOk:function(){e()}})}}}]);
//# sourceMappingURL=userGroup.a0151bd0.js.map